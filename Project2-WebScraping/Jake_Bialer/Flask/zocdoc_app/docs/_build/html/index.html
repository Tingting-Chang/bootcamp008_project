<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <title>First News App &mdash; First News App  documentation</title>

    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="First News App  documentation" href="#" />
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">First News App  documentation</a> &raquo;</li>
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">

  <div class="section" id="first-news-app">
<h1>First News App<a class="headerlink" href="#first-news-app" title="Permalink to this headline">¶</a></h1>
<p>A step-by-step guide to publishing a simple news application.</p>
<p>This tutorial will walk you through the process of building an interactive data visualization
from a structured dataset. You will get hands-on experience in every stage of the
development process, writing Python, HTML and JavaScript and recording it in Git&#8217;s
version control system. By the end you will have published your work on the World Wide Web.</p>
<p>This guide was prepared for training sessions of <a class="reference external" href="http://www.ire.org/">Investigative Reporters and Editors (IRE)</a>
and the <a class="reference external" href="http://data.nicar.org/">National Institute for Computer-Assisted Reporting (NICAR)</a>
by <a class="reference external" href="http://palewi.re/who-is-ben-welsh/">Ben Welsh</a>. It debuted on February 27, 2014, <a class="reference external" href="https://ire.org/events-and-training/event/973/1026/">at NICAR&#8217;s annual conference
in Baltimore</a>. A revised version was presented at
<a class="reference external" href="http://ire.org/conferences/nicar2015/hands-on-training/">the following year&#8217;s conference</a> in Atlanta. It
is scheduled to be taught again at <a class="reference external" href="http://www.ire.org/conferences/nicar2016/schedule/">the upcoming Denver conference</a>
on March 11 and 12, 2016.</p>
<ul class="simple">
<li>Code: <a class="reference external" href="https://github.com/ireapps/first-news-app">github.com/ireapps/first-news-app</a></li>
<li>Demonstration: <a class="reference external" href="http://ireapps.github.io/first-news-app/build/index.html">ireapps.github.io/first-news-app/build/index.html</a></li>
<li>Issues: <a class="reference external" href="https://github.com/ireapps/first-news-app/issues">github.com/ireapps/first-news-app/issues</a></li>
</ul>
<div class="section" id="what-you-will-make">
<h2>What you will make<a class="headerlink" href="#what-you-will-make" title="Permalink to this headline">¶</a></h2>
<p>This tutorial will guide you through the process of publishing an interactive database and map
about the more than 60 people who died during the riots that swept Los Angeles
for five days in 1992. You will repurpose the data from <a class="reference external" href="http://spreadsheets.latimes.com/la-riots-deaths/">a Los Angeles Times
application</a> that
accompanied a story released on the 20th anniversary of the riots.</p>
<p>A working example can be found at <a class="reference external" href="http://ireapps.github.io/first-news-app/build/index.html">ireapps.github.io/first-news-app/build/index.html</a></p>
</div>
<div class="section" id="prelude-prerequisites">
<h2>Prelude: Prerequisites<a class="headerlink" href="#prelude-prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before you can begin, your computer needs the following tools installed and working
to participate.</p>
<ol class="arabic simple">
<li>A <a class="reference external" href="https://en.wikipedia.org/wiki/Command-line_interface">command-line interface</a> to interact with your computer</li>
<li>A <a class="reference external" href="https://en.wikipedia.org/wiki/Text_editor">text editor</a> to work with plain text files</li>
<li><a class="reference external" href="http://git-scm.com/">Git</a> version control software and an account at <a class="reference external" href="http://www.github.com">GitHub.com</a></li>
<li>Version 2.7 of the <a class="reference external" href="http://python.org/download/releases/2.7.6/">Python</a> programming language</li>
<li>The <a class="reference external" href="https://pip.pypa.io/en/latest/installing.html">pip</a> package manager and <a class="reference external" href="http://www.virtualenv.org/en/latest/">virtualenv</a> environment manager for Python</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on your experience and operating system, you might already be ready
to go with everything above. If so, move on to the next chapter. If not,
don&#8217;t worry. And don&#8217;t give up! It will be a bit of a
slog but the instructions below will point you in the right direction.</p>
</div>
<div class="section" id="id2">
<h3>Command-line interface<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Unless something is wrong with your computer, there should be a way to open a window that lets you
type in commands. Different operating systems give this tool slightly different names, but they all have
some form of it, and there are alternative programs you can install as well.</p>
<p>On Windows you can find the command-line interface by opening the &#8220;command prompt.&#8221; Here are instructions for
<a class="reference external" href="http://windows.microsoft.com/en-us/windows/command-prompt-faq#1TC=windows-8">Windows 8</a>
and <a class="reference external" href="http://windows.microsoft.com/en-us/windows-vista/open-a-command-prompt-window">earlier versions</a>. On
Apple computers, you open the <a class="reference external" href="http://blog.teamtreehouse.com/introduction-to-the-mac-os-x-command-line">&#8220;Terminal&#8221; application</a>. Ubuntu Linux
comes with a program of the <a class="reference external" href="http://askubuntu.com/questions/38162/what-is-a-terminal-and-how-do-i-open-and-use-it">same name</a>.</p>
</div>
<div class="section" id="id3">
<h3>Text editor<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>A program like Microsoft Word, which can do all sorts of text formatting like
change the size and color of words, is not what you need. Do not try to use it below.</p>
<p>You need a program that works with simple <a class="reference external" href="https://en.wikipedia.org/wiki/Text_file">&#8220;plain text&#8221; files</a>,
and is therefore capable of editing documents containing Python code, HTML markup and other languages without
dressing them up by adding anything extra. Such programs are easy to find and some of the best ones are free, including those below.</p>
<p>For Windows, I recommend installing <a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a>. For
Apple computers, try <a class="reference external" href="http://www.barebones.com/products/textwrangler/download.html">TextWrangler</a>. In
Ubuntu Linux you can stick with the pre-installed <a class="reference external" href="https://help.ubuntu.com/community/gedit">gedit</a> text editor.</p>
</div>
<div class="section" id="git-and-github">
<h3>Git and GitHub<a class="headerlink" href="#git-and-github" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://git-scm.com/">Git</a> is a version control program for saving the changes
you make to files over time. This is useful when you&#8217;re working on your own,
but quickly becomes essential with large software projects, especially if you work with other developers.</p>
<p><a class="reference external" href="https://github.com/">GitHub</a> is a website that hosts git code repositories, both public and private. It comes
with many helpful tools for reviewing code and managing projects. It also has some
<a class="reference external" href="http://pages.github.com/">extra tricks</a> that make it easy to publish web pages, which we will use later.</p>
<p>GitHub offers helpful guides for installing Git in
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-windows">Windows</a>,
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-mac">Macs</a> and
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-linux">Linux</a>. You can verify
it&#8217;s installed from your command line like so:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># You don&#39;t have to type the &quot;$&quot; It&#39;s just a generic symbol</span>
<span class="c1"># geeks use to show they&#39;re working on the command line.</span>
$ git --version
</pre></div>
</div>
<p>Once that&#8217;s done, you should create an account at GitHub, if you don&#8217;t already have one.
It shouldn&#8217;t cost you anything. <a class="reference external" href="https://github.com/pricing">The free plan</a>
is all that&#8217;s required to complete this lesson.</p>
</div>
<div class="section" id="id5">
<h3>Python<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>If you are using Mac OSX or a common flavor of Linux, Python is probably already installed and you can
test to see what version, if any, is there waiting for you by typing the following into your terminal.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python -V
</pre></div>
</div>
<p>If you don&#8217;t have Python installed (a more likely fate for Windows users) try downloading and installing it from <a class="reference external" href="https://www.python.org/download/releases/2.7.8/">here</a>. In Windows, it&#8217;s also crucial to make sure that the
Python program is available on your system&#8217;s <code class="docutils literal"><span class="pre">PATH</span></code> so it can be called from anywhere on the command line. <a class="reference external" href="http://showmedo.com/videotutorials/video?name=960000&amp;fromSeriesID=96">This screencast</a> can guide
you through that process.</p>
<p>Python 2.7 is preferred but you can probably find a
way to make most of this tutorial work with other versions if you futz a little.</p>
</div>
<div class="section" id="pip-and-virtualenv">
<h3>pip and virtualenv<a class="headerlink" href="#pip-and-virtualenv" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="https://pip.pypa.io/en/latest/">pip package manager</a>
makes it easy to install open-source libraries that
expand what you&#8217;re able to do with Python. Later, we will use it to install everything
needed to create a working web application.</p>
<p>If you don&#8217;t have it already, you can get pip by following
<a class="reference external" href="https://pip.pypa.io/en/latest/installing.html">these instructions</a>. In Windows, it&#8217;s necessary to make sure that the
Python <code class="docutils literal"><span class="pre">Scripts</span></code> directory is available on your system&#8217;s <code class="docutils literal"><span class="pre">PATH</span></code> so it can be called from anywhere on the command line. <a class="reference external" href="http://showmedo.com/videotutorials/video?name=960000&amp;fromSeriesID=96">This screencast</a> can help.</p>
<p>Verify pip is installed with the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip -V
</pre></div>
</div>
<p>The <a class="reference external" href="http://www.virtualenv.org/en/latest/">virtualenv environment manager</a>
makes it possible to create an isolated corner of your computer where all the different
tools you use to build an application are sealed off.</p>
<p>It might not be obvious why you need this, but it quickly becomes important when you need to juggle different tools
for different projects on one computer. By developing your applications inside separate
virtualenv environments, you can use different versions of the same third-party Python libraries without a conflict.
You can also more easily recreate your project on another machine, handy when
you want to copy your code to a server that publishes pages on the Internet.</p>
<p>You can check if virtualenv is installed with the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ virtualenv --version
</pre></div>
</div>
<p>If you don&#8217;t have it, install it with pip.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install virtualenv
<span class="c1"># If you&#39;re on a Mac or Linux and get an error saying you lack the right permissions, try it again as a superuser.</span>
$ sudo pip install virtualenv
</pre></div>
</div>
<p>If that doesn&#8217;t work, <a class="reference external" href="http://www.virtualenv.org/en/latest/virtualenv.html#installation">try following this advice</a>.</p>
</div>
</div>
<div class="section" id="act-1-hello-git">
<span id="activate"></span><h2>Act 1: Hello Git<a class="headerlink" href="#act-1-hello-git" title="Permalink to this headline">¶</a></h2>
<p>Start by creating a new development environment with virtualenv. Name it after our application.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># You don&#39;t have to type the &quot;$&quot; It&#39;s just a generic symbol</span>
<span class="c1"># geeks use to show they&#39;re working on the command line.</span>
$ virtualenv first-news-app
</pre></div>
</div>
<p>Jump into the directory it created.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> first-news-app
</pre></div>
</div>
<p>Turn on the new virtualenv, which will instruct your terminal to only use those libraries installed
inside its sealed space. You only need to create the virtualenv once, but you&#8217;ll need to repeat these
&#8220;activation&#8221; steps each time you return to working on this project.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># In Linux or Mac OSX try this...</span>
$ . bin/activate
<span class="c1"># In Windows it might take something more like...</span>
$ <span class="nb">cd</span> Scripts
$ activate
$ <span class="nb">cd</span> ..
</pre></div>
</div>
<p>Create a new Git repository.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git init repo
</pre></div>
</div>
<p>Jump into the repository.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> repo
</pre></div>
</div>
<p>Visit <a class="reference external" href="http://www.github.com">GitHub</a> and create a new public repository named <code class="docutils literal"><span class="pre">first-news-app</span></code>. Don&#8217;t check &#8220;Initialize with README.&#8221;
You want to start with a blank repository.</p>
<p>Then connect your local directory to it with the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git remote add origin https://github.com/&lt;yourusername&gt;/first-news-app.git
</pre></div>
</div>
<p>Create your first file, a blank <code class="docutils literal"><span class="pre">README</span></code> with a <a class="reference external" href="https://en.wikipedia.org/wiki/Markdown">Markdown</a>
file extension since that&#8217;s <a class="reference external" href="https://help.github.com/articles/github-flavored-markdown">the preferred format of GitHub</a>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Macs or Linux:</span>
$ touch README.md
<span class="c1"># In Windows fire it up in your text editor right away:</span>
$ start notepad++ README.md
</pre></div>
</div>
<p>Open up the README in your text editor and type something in it. Maybe something like:</p>
<div class="highlight-markdown"><div class="highlight"><pre><span></span>My first news app
=================
</pre></div>
</div>
<p>Make sure to save it. Then officially add the file to your repository for tracking with Git&#8217;s <code class="docutils literal"><span class="pre">add</span></code> command.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add README.md
</pre></div>
</div>
<p>Log its creation with Git&#8217;s <code class="docutils literal"><span class="pre">commit</span></code> command. You can include a personalized message after the <code class="docutils literal"><span class="pre">-m</span></code> flag.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git commit -m <span class="s2">&quot;First commit&quot;</span>
</pre></div>
</div>
<p>If this is your first time using Git, you may be prompted to configure you name and email.
If so, take the time now. Then run the <code class="docutils literal"><span class="pre">commit</span></code> command above again.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git config --global user.email <span class="s2">&quot;your@email.com&quot;</span>
$ git config --global user.name <span class="s2">&quot;your name&quot;</span>
</pre></div>
</div>
<p>Now, finally, push your commit up to GitHub.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git push origin master
</pre></div>
</div>
<p>Reload your repository on GitHub and see your handiwork.</p>
</div>
<div class="section" id="act-2-hello-flask">
<h2>Act 2: Hello Flask<a class="headerlink" href="#act-2-hello-flask" title="Permalink to this headline">¶</a></h2>
<p>Use pip on the command line to install <a class="reference external" href="http://flask.pocoo.org/">Flask</a>, the Python &#8220;microframework&#8221;
we&#8217;ll use to put together our website.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install Flask
</pre></div>
</div>
<p>Create a new file called <code class="docutils literal"><span class="pre">app.py</span></code> where we will configure Flask.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Again, Macs and Linux:</span>
$ touch app.py
<span class="c1"># Windows:</span>
$ start notepad++ app.py
</pre></div>
</div>
<p>Open <code class="docutils literal"><span class="pre">app.py</span></code> with your text editor and import the Flask basics. This is the file that will serve as your
application&#8217;s &#8220;backend,&#8221; routing data to the appropriate pages.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>  <span class="c1"># Note the double underscores on each side!</span>
</pre></div>
</div>
<p>Next we will configure Flask to make a page at your site&#8217;s root URL.</p>
<p>Configure Flask to boot up a test server when you run <code class="docutils literal"><span class="pre">app.py</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="hll"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class="hll">    <span class="c1"># Fire up the Flask test server</span>
</span><span class="hll">    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>You&#8217;re probably asking, &#8220;What the heck is <code class="docutils literal"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code>?&#8221; The short answer: It&#8217;s just one of the weird things in Python you have to memorize. But it&#8217;s worth the brain space because it allows you to run any Python script as a program.</p>
<p class="last">Anything indented inside that particular <code class="docutils literal"><span class="pre">if</span></code> clause is executed when the script is called from the command line. In this case, that means booting up your web site using Flask&#8217;s built-in <code class="docutils literal"><span class="pre">app.run</span></code> function.</p>
</div>
<p>Don&#8217;t forget to save your changes. Then run <code class="docutils literal"><span class="pre">app.py</span></code> on the command-line and open up your browser to <a class="reference external" href="http://localhost:5000">localhost:5000</a></p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python app.py
</pre></div>
</div>
<p>Here&#8217;s what you should see. A website with nothing to show.</p>
<img alt="_images/hello-flask-404.png" src="_images/hello-flask-404.png" />
<p>Next we&#8217;ll put a page there. Our goal is to publish the complete list of
people who died during the riots using a template called <code class="docutils literal"><span class="pre">index.html</span></code>.</p>
<p>That starts by importing <code class="docutils literal"><span class="pre">render_template</span></code>, a Flask function we can use to combine data with HTML to make a webpage.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="hll"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
</span><span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Fire up the Flask test server</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Then create a function called <code class="docutils literal"><span class="pre">index</span></code> that returns our rendered <code class="docutils literal"><span class="pre">index.html</span></code> template.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="hll"><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
</span><span class="hll">    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span class="hll">
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Fire up the Flask test server</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Now use one of Flask&#8217;s coolest tricks, the <code class="docutils literal"><span class="pre">app.route</span></code> decorater, to connect
that function with the root URL of our site, <code class="docutils literal"><span class="pre">/</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="hll"><span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
</span><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Fire up the Flask test server</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Return to your command-line interface and create a directory to store your templates in <a class="reference external" href="http://flask.pocoo.org/docs/quickstart/#rendering-templates">the default location Flask expects</a>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir templates
</pre></div>
</div>
<p>Next create the <code class="docutils literal"><span class="pre">index.html</span></code> file we referenced in <code class="docutils literal"><span class="pre">app.py</span></code>. This is the HTML file where your will lay out your webpage.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Macs and Linux:</span>
$ touch templates/index.html
<span class="c1"># Windows:</span>
$ start notepad++ templates/index.html
</pre></div>
</div>
<p>Open it up in your text editor and write something clever.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span>Hello World!
</pre></div>
</div>
<p>Head back to your browser and visit <a class="reference external" href="http://localhost:5000">localhost:5000</a> again. You should see
the contents of your template displayed on the page.</p>
<img alt="_images/hello-flask-hello-world.png" src="_images/hello-flask-hello-world.png" />
<p>We&#8217;re approaching the end of this act, so it&#8217;s time to save your work by returning to the
command line and committing these changes to your Git repository.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To get the terminal back up, you will either need to quit out of <code class="docutils literal"><span class="pre">app.py</span></code> by hitting <code class="docutils literal"><span class="pre">CTRL-C</span></code>, or open a second terminal and do additional work there. If you elect to open a second terminal, which is recommended, make sure to check into the virtualenv by repeating the <code class="docutils literal"><span class="pre">.</span> <span class="pre">bin/activate</span></code> part of <a class="reference internal" href="#activate"><span>Act 1: Hello Git</span></a>. If you choose to quit out of <code class="docutils literal"><span class="pre">app.py</span></code>, you will need to turn it back on later by calling <code class="docutils literal"><span class="pre">python</span> <span class="pre">app.py</span></code> where appropriate.</p>
</div>
<p>I bet you remember how from above. But here&#8217;s a reminder.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;Flask app.py and first template&quot;</span>
</pre></div>
</div>
<p>Push it up to GitHub and check out the changes there.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git push origin master
</pre></div>
</div>
<p>Congratulations, you&#8217;ve made a real web page with Flask. Now to put something useful in it.</p>
</div>
<div class="section" id="act-3-hello-html">
<h2>Act 3: Hello HTML<a class="headerlink" href="#act-3-hello-html" title="Permalink to this headline">¶</a></h2>
<p>Start over in your <code class="docutils literal"><span class="pre">templates/index.html</span></code> file with a bare-bones HTML document.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Commit the changes to your repository, if only for practice.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add templates/index.html
$ git commit -m <span class="s2">&quot;Real HTML&quot;</span>
$ git push origin master
</pre></div>
</div>
<p>Make a directory to store data files.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir static
</pre></div>
</div>
<p>Download <a class="reference external" href="https://raw.github.com/ireapps/first-news-app/master/static/la-riots-deaths.csv">the comma-delimited file</a> that will be the backbone of our application and save it there as <code class="docutils literal"><span class="pre">la-riots-deaths.csv</span></code>. Add it to your git repository.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add static
$ git commit -m <span class="s2">&quot;Added CSV source data&quot;</span>
$ git push origin master
</pre></div>
</div>
<p>Next we will open up <code class="docutils literal"><span class="pre">app.py</span></code> in your text editor and create a function that uses Python&#8217;s <code class="docutils literal"><span class="pre">csv</span></code> module to access the CSV data.</p>
<p>First, create the new function and give it the path to your CSV file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="hll"><span class="kn">import</span> <span class="nn">csv</span>
</span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="hll"><span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
</span><span class="hll">    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
</span><span class="hll">
</span><span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Open up the file path for reading with Python using the built-in <a class="reference external" href="https://docs.python.org/2/library/functions.html#open">open</a> function.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
<span class="hll">    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Pass it into the csv module&#8217;s <a class="reference external" href="https://docs.python.org/2/library/csv.html#csv.DictReader">DictReader</a>, to be parsed and returned as a list of dictionaries.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
<span class="hll">    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Don&#8217;t know what a dictionary is? That&#8217;s okay. You can read more about them <a class="reference external" href="http://learnpythonthehardway.org/book/ex39.html">here</a> but the minimum you need to know now is that they are Python&#8217;s way of handling each row in your CSV. The columns there, like <code class="docutils literal"><span class="pre">id</span></code> or <code class="docutils literal"><span class="pre">gender</span></code>, are translated in &#8220;keys&#8221; on dictionary objects that you can access like <code class="docutils literal"><span class="pre">row['id']</span></code>.</p>
</div>
<p>A quirks of CSV objects is that once they&#8217;re used they disappear. There&#8217;s a good reason related to efficiency and memory limitations and all that but we won&#8217;t bother with that here. Just take our word and use Python&#8217;s built-in <code class="docutils literal"><span class="pre">list</span></code> function to convert this one to a permanent list.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
<span class="hll">    <span class="n">csv_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv_obj</span><span class="p">)</span>
</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Close the function by return the csv list.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">csv_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv_obj</span><span class="p">)</span>
<span class="hll">    <span class="k">return</span> <span class="n">csv_list</span>
</span>
<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Next have your <code class="docutils literal"><span class="pre">index</span></code> function pull the CSV data using your new code and pass it on the top the template, where it will be named <code class="docutils literal"><span class="pre">object_list</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">csv_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv_obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">csv_list</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
<span class="hll">    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">object_list</span><span class="o">=</span><span class="n">object_list</span><span class="p">)</span>
</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Make sure to save <code class="docutils literal"><span class="pre">app.py</span></code>. Then return to the <code class="docutils literal"><span class="pre">index.html</span></code> template. There you can dump out the <code class="docutils literal"><span class="pre">object_list</span></code> data using Flask&#8217;s templating language <a class="reference external" href="http://jinja.pocoo.org/">Jinja</a>.</p>
<div class="highlight-jinja"><div class="highlight"><pre><span></span><span class="x">&lt;!doctype html&gt;</span>
<span class="x">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="x">    &lt;head&gt;&lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        &lt;h1&gt;Deaths during the L.A. riots&lt;/h1&gt;</span>
<span class="hll"><span class="x">        </span><span class="cp">{{</span> <span class="nv">object_list</span> <span class="cp">}}</span><span class="x"></span>
</span><span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
<p>If it isn&#8217;t already running, return the command line, restart your test server and visit <a class="reference external" href="http://localhost:5000">localhost:5000</a> again.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python app.py
</pre></div>
</div>
<img alt="_images/hello-html-dump.png" src="_images/hello-html-dump.png" />
<p>Now we&#8217;ll use Jinja to sculpt the data in <code class="docutils literal"><span class="pre">index.html</span></code> to create <a class="reference external" href="http://www.w3schools.com/html/html_tables.asp">an HTML table</a> that lists all the names. Flask&#8217;s templating language allows us to loop through the data list and print out a row for each record.</p>
<div class="highlight-jinja"><div class="highlight"><pre><span></span><span class="x">&lt;!doctype html&gt;</span>
<span class="x">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="x">    &lt;head&gt;&lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        &lt;h1&gt;Deaths during the L.A. riots&lt;/h1&gt;</span>
<span class="hll"><span class="x">        &lt;table border=1 cellpadding=7&gt;</span>
</span><span class="hll"><span class="x">            &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;th&gt;Name&lt;/th&gt;</span>
</span><span class="hll"><span class="x">            &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">obj</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span><span class="x"></span>
</span><span class="hll"><span class="x">            &lt;tr&gt;</span>
</span><span class="hll"><span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.full_name</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">            &lt;/tr&gt;</span>
</span><span class="hll"><span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</span><span class="hll"><span class="x">        &lt;/table&gt;</span>
</span><span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Pause to reload your browser page.</p>
<img alt="_images/hello-html-names.png" src="_images/hello-html-names.png" />
<p>Next expand the table to include a lot more data.</p>
<div class="highlight-jinja"><div class="highlight"><pre><span></span><span class="x">&lt;!doctype html&gt;</span>
<span class="x">&lt;html lang=&quot;en&quot;&gt;</span>
<span class="x">    &lt;head&gt;&lt;/head&gt;</span>
<span class="x">    &lt;body&gt;</span>
<span class="x">        &lt;h1&gt;Deaths during the L.A. riots&lt;/h1&gt;</span>
<span class="x">        &lt;table border=1 cellpadding=7&gt;</span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;th&gt;Name&lt;/th&gt;</span>
<span class="hll"><span class="x">                &lt;th&gt;Date&lt;/th&gt;</span>
</span><span class="hll"><span class="x">                &lt;th&gt;Type&lt;/th&gt;</span>
</span><span class="hll"><span class="x">                &lt;th&gt;Address&lt;/th&gt;</span>
</span><span class="hll"><span class="x">                &lt;th&gt;Age&lt;/th&gt;</span>
</span><span class="hll"><span class="x">                &lt;th&gt;Gender&lt;/th&gt;</span>
</span><span class="hll"><span class="x">                &lt;th&gt;Race&lt;/th&gt;</span>
</span><span class="x">            &lt;/tr&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">for</span> <span class="nv">obj</span> <span class="k">in</span> <span class="nv">object_list</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">            &lt;tr&gt;</span>
<span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.full_name</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="hll"><span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.date</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.type</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.address</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.age</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.gender</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="hll"><span class="x">                &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">obj.race</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
</span><span class="x">            &lt;/tr&gt;</span>
<span class="x">            </span><span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">        &lt;/table&gt;</span>
<span class="x">    &lt;/body&gt;</span>
<span class="x">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Reload your page in the browser again to see the change.</p>
<img alt="_images/hello-html-table.png" src="_images/hello-html-table.png" />
<p>Then commit your work.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add . <span class="c1"># Using &quot;.&quot; is a trick that will quickly stage *all* files you&#39;ve changed.</span>
$ git commit -m <span class="s2">&quot;Created basic table&quot;</span>
$ git push origin master
</pre></div>
</div>
<p>Next we&#8217;re going to create a unique &#8220;detail&#8221; page dedicated to each person. Start by returning to <code class="docutils literal"><span class="pre">app.py</span></code> in your text editor and adding the URL and template that will help make this happen.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">csv_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv_obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">csv_list</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">object_list</span><span class="o">=</span><span class="n">object_list</span><span class="p">)</span>

<span class="hll"><span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&lt;row_id&gt;/&#39;</span><span class="p">)</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">row_id</span><span class="p">):</span>
</span><span class="hll">    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;detail.html&#39;</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
</span><span class="hll">
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notice a key difference between the URL route for the index and the one we just added. This time, both the URL route and function accept an argument, named <code class="docutils literal"><span class="pre">row_id</span></code>. Our goal is for the number passed into the URL and then through the function where it can be used to pull the record with the corresponding <code class="docutils literal"><span class="pre">id</span></code> from the CSV. Once we have our hands on it, we can pass it on to the template to render its unique page.</p>
</div>
<p>Create a new file in your templates directory called <code class="docutils literal"><span class="pre">detail.html</span></code> for it to connect with.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Macs and Linux:</span>
$ touch templates/detail.html
<span class="c1"># Windows:</span>
$ start notepad++ templates/detail.html
</pre></div>
</div>
<p>Put something simple in it with your text editor.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span>Hello World!
</pre></div>
</div>
<p>Then, if it&#8217;s not running, restart your test server and use your browser to visit <a class="reference external" href="http://localhost:5000/1/">localhost:5000/1/</a>, <a class="reference external" href="http://localhost:5000/200/">localhost:5000/200/</a> or any other number.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python app.py
</pre></div>
</div>
<img alt="_images/hello-html-hello-detail.png" src="_images/hello-html-hello-detail.png" />
<p>To customize the page for each person, we will need to connect the <code class="docutils literal"><span class="pre">row_id</span></code> in the URL with the <code class="docutils literal"><span class="pre">id</span></code> column in the CSV data file.</p>
<p>First, return to <code class="docutils literal"><span class="pre">app.py</span></code> and pull the CSV data into the <code class="docutils literal"><span class="pre">detail</span></code> view.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">csv_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv_obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">csv_list</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">object_list</span><span class="o">=</span><span class="n">object_list</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&lt;row_id&gt;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">row_id</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;detail.html&#39;</span>
<span class="hll">    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
</span>    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Then have the <code class="docutils literal"><span class="pre">detail</span></code> function loop through the CSV data list, testing each row&#8217;d <code class="docutils literal"><span class="pre">id</span></code> field against the <code class="docutils literal"><span class="pre">row_id</span></code> provided by the URL. When you find a match, pass that row out to the template for rendering with the name <code class="docutils literal"><span class="pre">object</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">csv_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv_obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">csv_list</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">object_list</span><span class="o">=</span><span class="n">object_list</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&lt;row_id&gt;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">row_id</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;detail.html&#39;</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
<span class="hll">    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">object_list</span><span class="p">:</span>
</span><span class="hll">        <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">row_id</span><span class="p">:</span>
</span><span class="hll">            <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="n">row</span><span class="p">)</span>
</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Now clear <code class="docutils literal"><span class="pre">detail.html</span></code> and make a new HTML document with a headline drawn from the data we&#8217;ve passed in from the dictionary.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ object.full_name }}<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Restart your test server and take a look at <code class="docutils literal"><span class="pre">http://localhost:5000/1/</span></code> again.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python app.py
</pre></div>
</div>
<img alt="_images/hello-html-hello-cesar.png" src="_images/hello-html-hello-cesar.png" />
<p>Return to <code class="docutils literal"><span class="pre">index.html</span></code> and add a hyperlink to each detail page to the table.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="hll">                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
</span>                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Restart your test server and take a look at <code class="docutils literal"><span class="pre">http://localhost:5000/</span></code>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python app.py
</pre></div>
</div>
<img alt="_images/hello-html-hello-links.png" src="_images/hello-html-hello-links.png" />
<p>In <code class="docutils literal"><span class="pre">detail.html</span></code> you can use the rest of the data fields to write a sentence about the victim.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span class="hll">            {{ object.full_name }}, a {{ object.age }} year old,
</span><span class="hll">            {{ object.race }} {{ object.gender|lower }} died on {{ object.date }}
</span><span class="hll">            in a {{ object.type|lower }} at {{ object.address }} in {{ object.neighborhood }}.
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Reload <a class="reference external" href="http://localhost:5000/1/">localhost:5000/1/</a> to see it.</p>
<img alt="_images/hello-html-hello-graf.png" src="_images/hello-html-hello-graf.png" />
<p>Then once again commit your work.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;Created a detail page about each victim.&quot;</span>
$ git push origin master
</pre></div>
</div>
<p>One last thing before we move on. What if somebody vists an URL for an <code class="docutils literal"><span class="pre">id</span></code> that doesn&#8217;t exist, like <a class="reference external" href="http://localhost:5000/99999/">localhost:5000/99999/</a>? Right now Flask throws an ugly error.</p>
<img alt="_images/hello-html-error.png" src="_images/hello-html-error.png" />
<p>The polite thing to do is return what is called a <a class="reference external" href="http://en.wikipedia.org/wiki/HTTP_404">404 response code</a>. To do that Flask, you only need to import a function called <code class="docutils literal"><span class="pre">abort</span></code> and run it after our loop finishes without finding a match.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="hll"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">abort</span>
</span><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get_csv</span><span class="p">():</span>
    <span class="n">csv_path</span> <span class="o">=</span> <span class="s1">&#39;./static/la-riots-deaths.csv&#39;</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
    <span class="n">csv_obj</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">csv_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">csv_obj</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">csv_list</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;index.html&#39;</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">object_list</span><span class="o">=</span><span class="n">object_list</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s1">&#39;/&lt;row_id&gt;/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">row_id</span><span class="p">):</span>
    <span class="n">template</span> <span class="o">=</span> <span class="s1">&#39;detail.html&#39;</span>
    <span class="n">object_list</span> <span class="o">=</span> <span class="n">get_csv</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">object_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">row_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="nb">object</span><span class="o">=</span><span class="n">row</span><span class="p">)</span>
<span class="hll">    <span class="n">abort</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">use_reloader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Reload your bad URL and you&#8217;ll see the change.</p>
<img alt="_images/hello-html-404.png" src="_images/hello-html-404.png" />
</div>
<div class="section" id="act-4-hello-javascript">
<h2>Act 4: Hello JavaScript<a class="headerlink" href="#act-4-hello-javascript" title="Permalink to this headline">¶</a></h2>
<p>Next we will work to make a map with every victim in <code class="docutils literal"><span class="pre">index.html</span></code> using the
<a class="reference external" href="http://leafletjs.com/">Leaflet</a> JavaScript library. Start by importing it in your page.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span>    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Create an HTML element to hold the map and use Leaflet to boot it up and center on Los Angeles.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
</span><span class="hll">            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class="hll">                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
</span><span class="hll">                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
</span><span class="hll">                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
</span><span class="hll">            <span class="p">});</span>
</span><span class="hll">            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span>    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Reload the root URL of your site at <a class="reference external" href="http://localhost:5000/">localhost:5000</a>.</p>
<img alt="_images/hello-js-empty-map.png" src="_images/hello-js-empty-map.png" />
<p>Loop through the CSV data and format it as a <a class="reference external" href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> object, which Leaflet can easily load.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
<span class="hll">            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="hll">              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
</span><span class="hll">              <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
</span><span class="hll">                <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">obj</span> <span class="k">in</span> <span class="nx">object_list</span> <span class="o">%</span><span class="p">}</span>
</span><span class="hll">                <span class="p">{</span>
</span><span class="hll">                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
</span><span class="hll">                  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">                    <span class="s2">&quot;full_name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.full_name }}&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.id }}&quot;</span>
</span><span class="hll">                  <span class="p">},</span>
</span><span class="hll">                  <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">                    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="p">}}]</span>
</span><span class="hll">                  <span class="p">}</span>
</span><span class="hll">                <span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
</span><span class="hll">                <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
</span><span class="hll">              <span class="p">]</span>
</span><span class="hll">            <span class="p">};</span>
</span><span class="hll">            <span class="kd">var</span> <span class="nx">dataLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span class="hll">            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">dataLayer</span><span class="p">);</span>
</span>        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Reload the page.</p>
<img alt="_images/hello-js-pins.png" src="_images/hello-js-pins.png" />
<p>Add a popup on the map pins that shows the name of the victim.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
              <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">obj</span> <span class="k">in</span> <span class="nx">object_list</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;full_name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.full_name }}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.id }}&quot;</span>
                  <span class="p">},</span>
                  <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="p">}}]</span>
                  <span class="p">}</span>
                <span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
              <span class="p">]</span>
            <span class="p">};</span>
<span class="hll">            <span class="kd">var</span> <span class="nx">dataLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
</span><span class="hll">                <span class="nx">onEachFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">                    <span class="nx">layer</span><span class="p">.</span><span class="nx">bindPopup</span><span class="p">(</span><span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">full_name</span><span class="p">);</span>
</span><span class="hll">                <span class="p">}</span>
</span><span class="hll">            <span class="p">});</span>
</span>            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">dataLayer</span><span class="p">);</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Reload the page and click a pin.</p>
<img alt="_images/hello-js-popup.png" src="_images/hello-js-popup.png" />
<p>Now wrap the name in a hyperlink to that person&#8217;s detail page.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
              <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">obj</span> <span class="k">in</span> <span class="nx">object_list</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;full_name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.full_name }}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.id }}&quot;</span>
                  <span class="p">},</span>
                  <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="p">}}]</span>
                  <span class="p">}</span>
                <span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
              <span class="p">]</span>
            <span class="p">};</span>
<span class="hll">            <span class="kd">var</span> <span class="nx">dataLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
</span><span class="hll">                <span class="nx">onEachFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">                    <span class="nx">layer</span><span class="p">.</span><span class="nx">bindPopup</span><span class="p">(</span>
</span><span class="hll">                        <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;/&quot;&gt;&#39;</span> <span class="o">+</span>
</span><span class="hll">                            <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">full_name</span> <span class="o">+</span>
</span><span class="hll">                        <span class="s1">&#39;&lt;/a&gt;&#39;</span>
</span><span class="hll">                    <span class="p">);</span>
</span><span class="hll">                <span class="p">}</span>
</span><span class="hll">            <span class="p">});</span>
</span>            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">dataLayer</span><span class="p">);</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Reload again and click a pin.</p>
<img alt="_images/hello-js-pin-link.png" src="_images/hello-js-pin-link.png" />
<p>Commit your map.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;Made a map on the index page&quot;</span>
$ git push origin master
</pre></div>
</div>
<p>Open up <code class="docutils literal"><span class="pre">detail.html</span></code> and make a map there, focus on just that victim.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
<span class="hll">    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span><span class="hll">    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span>    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>
            {{ object.full_name }}, a {{ object.age }} year old,
            {{ object.race }} {{ object.gender|lower }} died on {{ object.date }}
            in a {{ object.type|lower }} at {{ object.address }} in {{ object.neighborhood }}.
        <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">y</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">x</span> <span class="p">}}],</span> <span class="mi">16</span><span class="p">);</span>
</span><span class="hll">            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class="hll">                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
</span><span class="hll">                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
</span><span class="hll">                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
</span><span class="hll">            <span class="p">});</span>
</span><span class="hll">            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
</span><span class="hll">            <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">marker</span><span class="p">([{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">y</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">x</span> <span class="p">}}]).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span>    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Reload a detail page, like the one at <a class="reference external" href="http://localhost:5000/1/">localhost:5000/1/</a>.</p>
<img alt="_images/hello-js-detail-map.png" src="_images/hello-js-detail-map.png" />
<p>Commit that.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;Made a map on the detail page&quot;</span>
$ git push origin master
</pre></div>
</div>
</div>
<div class="section" id="act-5-hello-internet">
<h2>Act 5: Hello Internet<a class="headerlink" href="#act-5-hello-internet" title="Permalink to this headline">¶</a></h2>
<p>In this final act, we will publish your application to the Internet using
<a class="reference external" href="http://pythonhosted.org/Frozen-Flask/">Frozen Flask</a>, a Python library that saves every page
you&#8217;ve made with Flask as a flat file that can be uploaded to the web. This is an
alternative publishing method that does not require you configure and host an full-fledged Internet
server.</p>
<p>First, use pip to install Frozen Flask from the command line.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install Frozen-Flask
</pre></div>
</div>
<p>Create a new file called <code class="docutils literal"><span class="pre">freeze.py</span></code> where we will configure what pages it should convert into flat files.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Mac and Linux:</span>
$ touch freeze.py
<span class="c1"># Windows:</span>
$ start notepad++ freeze.py
</pre></div>
</div>
<p>Use your text editor to write a basic Frozen Flask configuration.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_frozen</span> <span class="kn">import</span> <span class="n">Freezer</span>
<span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">app</span>
<span class="n">freezer</span> <span class="o">=</span> <span class="n">Freezer</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">freezer</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
</pre></div>
</div>
<p>Now run it from the command line, which will create a new directory called <code class="docutils literal"><span class="pre">build</span></code>
filled with a set of flattened files.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python freeze.py
</pre></div>
</div>
<p>Use your browser to open up one of the local files in <code class="docutils literal"><span class="pre">build</span></code>, rather that visit the
dynamically generated pages we created at <code class="docutils literal"><span class="pre">localhost</span></code>.</p>
<p>You will notice that the default Frozen Flask configuration only flatted out <code class="docutils literal"><span class="pre">index.html</span></code>, and not all your detail pages our template could generate using the data file.</p>
<p>To flatten those, again edit <code class="docutils literal"><span class="pre">freeze.py</span></code> to give it the instructions it needs to make a page for every record in the source CSV.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">flask_frozen</span> <span class="kn">import</span> <span class="n">Freezer</span>
<span class="hll"><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="n">app</span><span class="p">,</span> <span class="n">get_csv</span>
</span><span class="n">freezer</span> <span class="o">=</span> <span class="n">Freezer</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>

<span class="hll"><span class="nd">@freezer.register_generator</span>
</span><span class="hll"><span class="k">def</span> <span class="nf">detail</span><span class="p">():</span>
</span><span class="hll">    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">get_csv</span><span class="p">():</span>
</span><span class="hll">        <span class="k">yield</span> <span class="p">{</span><span class="s1">&#39;row_id&#39;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]}</span>
</span>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">freezer</span><span class="o">.</span><span class="n">freeze</span><span class="p">()</span>
</pre></div>
</div>
<p>Run it again from the command line and notice all the additional pages it made in the <code class="docutils literal"><span class="pre">build</span></code> directory. Try opening one in your browser.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python freeze.py
</pre></div>
</div>
<p>Commit all of the flat pages to the repository.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;Froze my app&quot;</span>
$ git push origin master
</pre></div>
</div>
<p>Finally, we will publish these static files to the web using <a class="reference external" href="http://pages.github.com/">GitHub&#8217;s Pages</a> feature. All it requires is that we create a new branch in our repository called <code class="docutils literal"><span class="pre">gh-pages</span></code> and push our files up to GitHub there.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git checkout -b gh-pages <span class="c1"># Create the new branch</span>
$ git merge master <span class="c1"># Pull in all the code from the master branch</span>
$ git push origin gh-pages <span class="c1"># Push up to GitHub from your new branch</span>
</pre></div>
</div>
<p>Now wait a minute or two, then visit <code class="docutils literal"><span class="pre">http://&lt;yourusername&gt;.github.io/first-news-app/build/index.html</span></code> to cross the finish line.</p>
<img alt="_images/hello-internet.png" src="_images/hello-internet.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If your page does not appear, make sure that you have verified your email address with GitHub. It is required before the site will allow publishing pages. And keep in mind there are many other options for publishing flat files, ranging from <a class="reference external" href="https://en.wikipedia.org/wiki/Dropbox_%28service%29">Dropbox</a> to <a class="reference external" href="https://en.wikipedia.org/wiki/Amazon_S3">Amazon&#8217;s S3 service</a>.</p>
</div>
<p>So you&#8217;ve built a site. But it&#8217;s kind of janky looking. The next chapter, which we won&#8217;t have time for in class,
will show you how to dress it up to look like the <a class="reference external" href="http://ireapps.github.io/first-news-app/build/index.html">demonstration site</a>.</p>
</div>
<div class="section" id="epilogue-hello-css">
<h2>Epilogue: Hello CSS<a class="headerlink" href="#epilogue-hello-css" title="Permalink to this headline">¶</a></h2>
<p>Before you get started, move back to the master branch of your repository.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git checkout master
</pre></div>
</div>
<p>The first step is to create a stylesheet in the static directory where <a class="reference external" href="https://en.wikipedia.org/wiki/Cascading_Style_Sheets">CSS</a>
code that controls the design of the page can be stored.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Macs or Linux:</span>
$ touch static/style.css
<span class="c1"># In Windows fire it up in your text editor right away:</span>
$ start notepad++ static/style.css
</pre></div>
</div>
<p>Add the style tag to the top of <code class="docutils literal"><span class="pre">index.html</span></code> so it imported on the page. Flask&#8217;s built-in <code class="docutils literal"><span class="pre">url_for</span></code>
method will create the URL for us.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;style.css&#39;) }}&quot;</span> <span class="p">/&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Deaths during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
              <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">obj</span> <span class="k">in</span> <span class="nx">object_list</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;full_name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.full_name }}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.id }}&quot;</span>
                  <span class="p">},</span>
                  <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="p">}}]</span>
                  <span class="p">}</span>
                <span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
              <span class="p">]</span>
            <span class="p">};</span>
            <span class="kd">var</span> <span class="nx">dataLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">onEachFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">layer</span><span class="p">.</span><span class="nx">bindPopup</span><span class="p">(</span>
                        <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;/&quot;&gt;&#39;</span> <span class="o">+</span>
                            <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">full_name</span> <span class="o">+</span>
                        <span class="s1">&#39;&lt;/a&gt;&#39;</span>
                    <span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">dataLayer</span><span class="p">);</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Before we start styling the page, let&#8217;s do a little reorganization of the HTML
to make a little more like a news site.</p>
<p>First, download this <a class="reference external" href="https://raw.githubusercontent.com/ireapps/first-news-app/master/static/irelogo.png">IRE logo</a>
and throw in the <code class="docutils literal"><span class="pre">static</span></code> directory. We&#8217;ll add that as an image in a new
navigation bar at the top of the site, then zip up the headline and move it above the map with
with a new byline.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;style.css&#39;) }}&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://first-news-app.readthedocs.org/&quot;</span><span class="p">&gt;</span>
</span><span class="hll">                <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;irelogo.png&#39;) }}&quot;</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>These are the 60 people who died during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;byline&quot;</span><span class="p">&gt;</span>
</span><span class="hll">                By <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://first-news-app.readthedocs.org/&quot;</span><span class="p">&gt;</span>The First News App Tutorial<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
              <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">obj</span> <span class="k">in</span> <span class="nx">object_list</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;full_name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.full_name }}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.id }}&quot;</span>
                  <span class="p">},</span>
                  <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="p">}}]</span>
                  <span class="p">}</span>
                <span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
              <span class="p">]</span>
            <span class="p">};</span>
            <span class="kd">var</span> <span class="nx">dataLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">onEachFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">layer</span><span class="p">.</span><span class="nx">bindPopup</span><span class="p">(</span>
                        <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;/&quot;&gt;&#39;</span> <span class="o">+</span>
                            <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">full_name</span> <span class="o">+</span>
                        <span class="s1">&#39;&lt;/a&gt;&#39;</span>
                    <span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">dataLayer</span><span class="p">);</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Now go into <code class="docutils literal"><span class="pre">style.css</span></code> and toss in some style we&#8217;ve prepared that will
draw in a dark top bar, limit the width of the page and tighten up the rest
of the page.</p>
<div class="highlight-css"><div class="highlight"><pre><span></span>body {
    margin: 0 auto;
    padding: 0;
    font-family: Verdana, sans-serif;
    background-color: ##F2EFEC;
    max-width: 1200px;
}
nav {
    background-color: #333132;
    width: 100%;
    height: 50px;
}
nav img {
    height: 34px;
    padding: 8px;
}
header {
    margin: 25px 10px 15px 10px;
    font-family: Times, Times New Roman, serif;
}
h1 {
    margin: 0;
    padding: 0;
    font-size: 44px;
    line-height: 50px;
    font-weight: bold;
    font-style: italic;
    text-shadow: 0.3px 0.3px 0px gray;
    letter-spacing: .01em;
}
.byline {
    margin: 6px 0 0 0;
    font-size: 13px;
    font-weight: bold;
}
.byline a {
    text-transform: uppercase;
}
table {
    border-collapse:collapse;
    margin: 0 0 20px 0;
    border-width: 0;
    width: 100%;
    font-size: 14px;
}
th {
    text-align:left;
}
tr, td, th {
    border-color: #f2f2f2;
}
tr:hover {
    background-color: #f3f3f3;
}
p {
    line-height:140%;
}
a {
    color: #4591B8;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}
</pre></div>
</div>
<p>Reload the page and you should see something a little more presentable.</p>
<img alt="_images/hello-css-desktop.png" src="_images/hello-css-desktop.png" />
<p>The next step is to upgrade the styles to reshape the page on smaller devices
like tablets and phones. This is done using a system known as <a class="reference external" href="https://en.wikipedia.org/wiki/Responsive_web_design">responsive design</a>
and <a class="reference external" href="https://en.wikipedia.org/wiki/Media_queries">CSS media queries</a> that set different style rules at different device sizes.</p>
<p>First the HTML page needs an extra tag to turn the system on.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;style.css&#39;) }}&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://first-news-app.readthedocs.org/&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;irelogo.png&#39;) }}&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>These are the 60 people who died during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;byline&quot;</span><span class="p">&gt;</span>
                By <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://first-news-app.readthedocs.org/&quot;</span><span class="p">&gt;</span>The First News App Tutorial<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
              <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">obj</span> <span class="k">in</span> <span class="nx">object_list</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;full_name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.full_name }}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.id }}&quot;</span>
                  <span class="p">},</span>
                  <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="p">}}]</span>
                  <span class="p">}</span>
                <span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
              <span class="p">]</span>
            <span class="p">};</span>
            <span class="kd">var</span> <span class="nx">dataLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">onEachFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">layer</span><span class="p">.</span><span class="nx">bindPopup</span><span class="p">(</span>
                        <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;/&quot;&gt;&#39;</span> <span class="o">+</span>
                            <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">full_name</span> <span class="o">+</span>
                        <span class="s1">&#39;&lt;/a&gt;&#39;</span>
                    <span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">dataLayer</span><span class="p">);</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Now the <code class="docutils literal"><span class="pre">style.css</span></code> file should be expanded to include media queries
that will drop columns from the table on smaller devices.</p>
<div class="highlight-css"><div class="highlight"><pre><span></span>body {
    margin: 0 auto;
    padding: 0;
    font-family: Verdana, sans-serif;
    background-color: ##F2EFEC;
    max-width: 1200px;
}
nav {
    background-color: #333132;
    width: 100%;
    height: 50px;
}
nav img {
    height: 34px;
    padding: 8px;
}
header {
    margin: 25px 10px 15px 10px;
    font-family: Times, Times New Roman, serif;
}
h1 {
    margin: 0;
    padding: 0;
    font-size: 44px;
    line-height: 50px;
    font-weight: bold;
    font-style: italic;
    text-shadow: 0.3px 0.3px 0px gray;
    letter-spacing: .01em;
}
.byline {
    margin: 6px 0 0 0;
    font-size: 13px;
    font-weight: bold;
}
.byline a {
    text-transform: uppercase;
}
table {
    border-collapse:collapse;
    margin: 0 0 20px 0;
    border-width: 0;
    width: 100%;
    font-size: 14px;
}
th {
    text-align:left;
}
tr, td, th {
    border-color: #f2f2f2;
}
tr:hover {
    background-color: #f3f3f3;
}
p {
    line-height:140%;
}
a {
    color: #4591B8;
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
<span class="hll">}
</span><span class="hll">@media (max-width: 979px) {
</span><span class="hll">    tr th:nth-of-type(n+3),
</span><span class="hll">    tr td:nth-of-type(n+3) {
</span><span class="hll">        display:none;
</span><span class="hll">    }
</span><span class="hll">}
</span><span class="hll">@media (max-width: 420px) {
</span><span class="hll">    tr th:nth-of-type(n+2),
</span><span class="hll">    tr td:nth-of-type(n+2) {
</span><span class="hll">        display:none;
</span><span class="hll">    }
</span><span class="hll">}
</span></pre></div>
</div>
<p>Reload the page and size down your browser to see how the page should appear
when visited by a mobile phone.</p>
<img alt="_images/hello-css-mobile.png" src="_images/hello-css-mobile.png" />
<p>We can punch up the map markers by replacing the Leaflet default pins with custom
designs from the <a class="reference external" href="https://www.mapbox.com/maki/">Mapbox&#8217;s open-source Maki set</a>.</p>
<p>Download <a class="reference external" href="https://github.com/ireapps/first-news-app/blob/master/static/marker-24.png">these</a> <a class="reference external" href="https://github.com/ireapps/first-news-app/blob/master/static/marker-24%402x.png">two</a>
black pin images and add them to your <code class="docutils literal"><span class="pre">static</span></code> directory.</p>
<p>Now expand our Leaflet JavaScript code to substitute these images for the defaults.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;style.css&#39;) }}&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://first-news-app.readthedocs.org/&quot;</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;irelogo.png&#39;) }}&quot;</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>These are the 60 people who died during the L.A. riots<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;byline&quot;</span><span class="p">&gt;</span>
                By <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://first-news-app.readthedocs.org/&quot;</span><span class="p">&gt;</span>The First News App Tutorial<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">7</span><span class="p">&gt;</span>
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Name<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Date<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Type<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Address<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Age<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Gender<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Race<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% for obj in object_list %}
            <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ obj.id }}/&quot;</span><span class="p">&gt;</span>{{ obj.full_name }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.date }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.type }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.address }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.age }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.gender }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
                <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ obj.race }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
            <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
        {% endfor %}
        <span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([</span><span class="mf">34.055</span><span class="p">,</span> <span class="o">-</span><span class="mf">118.35</span><span class="p">],</span> <span class="mi">9</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span>
              <span class="s2">&quot;features&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="nx">obj</span> <span class="k">in</span> <span class="nx">object_list</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;full_name&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.full_name }}&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ obj.id }}&quot;</span>
                  <span class="p">},</span>
                  <span class="s2">&quot;geometry&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;coordinates&quot;</span><span class="o">:</span> <span class="p">[{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">x</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">y</span> <span class="p">}}]</span>
                  <span class="p">}</span>
                <span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="nx">not</span> <span class="nx">loop</span><span class="p">.</span><span class="nx">last</span> <span class="o">%</span><span class="p">},{</span><span class="o">%</span> <span class="nx">endif</span> <span class="o">%</span><span class="p">}</span>
                <span class="p">{</span><span class="o">%</span> <span class="nx">endfor</span> <span class="o">%</span><span class="p">}</span>
              <span class="p">]</span>
            <span class="p">};</span>
<span class="hll">            <span class="kd">var</span> <span class="nx">blackIcon</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">Icon</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class="hll">                <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">                    <span class="nx">iconUrl</span><span class="o">:</span> <span class="s2">&quot;{{ url_for(&#39;static&#39;, filename=&#39;marker-24.png&#39;) }}&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="nx">iconSize</span><span class="o">:</span> <span class="p">[</span><span class="mi">24</span><span class="p">,</span> <span class="mi">24</span><span class="p">]</span>
</span><span class="hll">                <span class="p">}</span>
</span><span class="hll">            <span class="p">});</span>
</span>            <span class="kd">var</span> <span class="nx">dataLayer</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">geoJson</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="p">{</span>
<span class="hll">                <span class="nx">pointToLayer</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">latlng</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">                    <span class="k">return</span> <span class="nx">L</span><span class="p">.</span><span class="nx">marker</span><span class="p">(</span><span class="nx">latlng</span><span class="p">,</span> <span class="p">{</span><span class="nx">icon</span><span class="o">:</span> <span class="k">new</span> <span class="nx">blackIcon</span><span class="p">()});</span>
</span><span class="hll">                <span class="p">},</span>
</span>                <span class="nx">onEachFeature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">layer</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">layer</span><span class="p">.</span><span class="nx">bindPopup</span><span class="p">(</span>
                        <span class="s1">&#39;&lt;a href=&quot;&#39;</span> <span class="o">+</span> <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">&#39;/&quot;&gt;&#39;</span> <span class="o">+</span>
                            <span class="nx">feature</span><span class="p">.</span><span class="nx">properties</span><span class="p">.</span><span class="nx">full_name</span> <span class="o">+</span>
                        <span class="s1">&#39;&lt;/a&gt;&#39;</span>
                    <span class="p">);</span>
                <span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">dataLayer</span><span class="p">);</span>
        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>That will restyle the map to look like this.</p>
<img alt="_images/hello-css-markers.png" src="_images/hello-css-markers.png" />
<p>Extending this new design to detail page is simply a matter of repeating the steps above.</p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="cp">&lt;!doctype html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;viewport&quot;</span> <span class="na">content</span><span class="o">=</span><span class="s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;style.css&#39;) }}&quot;</span> <span class="p">/&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css&quot;</span> <span class="p">/&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.js&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="hll">        <span class="p">&lt;</span><span class="nt">nav</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;http://first-news-app.readthedocs.org/&quot;</span><span class="p">&gt;</span>
</span><span class="hll">                <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;{{ url_for(&#39;static&#39;, filename=&#39;irelogo.png&#39;) }}&quot;</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">nav</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;</span><span class="nt">header</span><span class="p">&gt;</span>
</span><span class="hll">            <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>{{ object.full_name }}, a {{ object.age }} year old, {{ object.race|lower }} {{ object.gender|lower }} died on {{ object.date }}
</span><span class="hll">    in a {{ object.type|lower }} at {{ object.address }} in {{ object.neighborhood }}.<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span><span class="hll">        <span class="p">&lt;/</span><span class="nt">header</span><span class="p">&gt;</span>
</span>        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;map&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;width:100%; height:300px;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;text/javascript&quot;</span><span class="p">&gt;</span>
            <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="s1">&#39;map&#39;</span><span class="p">).</span><span class="nx">setView</span><span class="p">([{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">y</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">x</span> <span class="p">}}],</span> <span class="mi">16</span><span class="p">);</span>
            <span class="kd">var</span> <span class="nx">mapquestLayer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">L</span><span class="p">.</span><span class="nx">TileLayer</span><span class="p">(</span><span class="s1">&#39;http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png&#39;</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">maxZoom</span><span class="o">:</span> <span class="mi">18</span><span class="p">,</span>
                <span class="nx">attribution</span><span class="o">:</span> <span class="s1">&#39;Data, imagery and map information provided by &lt;a href=&quot;http://open.mapquest.co.uk&quot; target=&quot;_blank&quot;&gt;MapQuest&lt;/a&gt;,&lt;a href=&quot;http://www.openstreetmap.org/&quot; target=&quot;_blank&quot;&gt;OpenStreetMap&lt;/a&gt; and contributors.&#39;</span><span class="p">,</span>
                <span class="nx">subdomains</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;otile1&#39;</span><span class="p">,</span><span class="s1">&#39;otile2&#39;</span><span class="p">,</span><span class="s1">&#39;otile3&#39;</span><span class="p">,</span><span class="s1">&#39;otile4&#39;</span><span class="p">]</span>
            <span class="p">});</span>
            <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">mapquestLayer</span><span class="p">);</span>
<span class="hll">            <span class="kd">var</span> <span class="nx">blackIcon</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">Icon</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
</span><span class="hll">                <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
</span><span class="hll">                    <span class="nx">iconUrl</span><span class="o">:</span> <span class="s2">&quot;{{ url_for(&#39;static&#39;, filename=&#39;marker-24.png&#39;) }}&quot;</span><span class="p">,</span>
</span><span class="hll">                    <span class="nx">iconSize</span><span class="o">:</span> <span class="p">[</span><span class="mi">24</span><span class="p">,</span> <span class="mi">24</span><span class="p">]</span>
</span><span class="hll">                <span class="p">}</span>
</span><span class="hll">            <span class="p">});</span>
</span><span class="hll">            <span class="kd">var</span> <span class="nx">marker</span> <span class="o">=</span> <span class="nx">L</span><span class="p">.</span><span class="nx">marker</span><span class="p">([{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">y</span> <span class="p">}},</span> <span class="p">{{</span> <span class="nx">object</span><span class="p">.</span><span class="nx">x</span> <span class="p">}}],</span> <span class="p">{</span><span class="nx">icon</span><span class="o">:</span> <span class="k">new</span> <span class="nx">blackIcon</span><span class="p">()}).</span><span class="nx">addTo</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</span>        <span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>That should shape up the page like this.</p>
<img alt="_images/hello-css-detail.png" src="_images/hello-css-detail.png" />
<p>Now it is time to build out all the pages by running the freeze script that will save all of
the pages again.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ python freeze.py
</pre></div>
</div>
<p>Commit all of the flat pages to the repository.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git add .
$ git commit -m <span class="s2">&quot;Froze my restyled app&quot;</span>
$ git push origin master
</pre></div>
</div>
<p>Republish your work by going back to the <code class="docutils literal"><span class="pre">gh-pages</span></code> branch and pushing up the code.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ git checkout gh-pages
$ git merge master
$ git push origin gh-pages
</pre></div>
</div>
<p>Now wait a minute or two, then visit <code class="docutils literal"><span class="pre">http://&lt;yourusername&gt;.github.io/first-news-app/build/index.html</span></code> to see
the restyled application.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">First News App</a><ul>
<li><a class="reference internal" href="#what-you-will-make">What you will make</a></li>
<li><a class="reference internal" href="#prelude-prerequisites">Prelude: Prerequisites</a></li>
<li><a class="reference internal" href="#act-1-hello-git">Act 1: Hello Git</a></li>
<li><a class="reference internal" href="#act-2-hello-flask">Act 2: Hello Flask</a></li>
<li><a class="reference internal" href="#act-3-hello-html">Act 3: Hello HTML</a></li>
<li><a class="reference internal" href="#act-4-hello-javascript">Act 4: Hello JavaScript</a></li>
<li><a class="reference internal" href="#act-5-hello-internet">Act 5: Hello Internet</a></li>
<li><a class="reference internal" href="#epilogue-hello-css">Epilogue: Hello CSS</a></li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="#">First News App  documentation</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Investigative Reporters and Editors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>
